name: Release
run-name: Release ${{ github.ref_name }}
permissions: write-all

on:
  push:
    tags:
      - "**@v[0-9]+.[0-9]+.[0-9]+"

concurrency:
  cancel-in-progress: true
  group: ${{ github.workflow }}-${{ github.ref_name }}

jobs:
  publish-lib:
    name: Publish lib
    uses: ./.github/workflows/release_lib.yml
    secrets:
      node-auth-token: ${{ secrets.NODE_AUTH_TOKEN }}
